(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[93729],{17314:(e,t,i)=>{i.d(t,{Z:()=>c});var r,s,n=i(813653),a=i(861470),o=0,d=0;const c=function(e,t,i){var c=t&&i||0,u=t||new Array(16),p=(e=e||{}).node||r,l=void 0!==e.clockseq?e.clockseq:s;if(null==p||null==l){var h=e.random||(e.rng||n.Z)();null==p&&(p=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==l&&(l=s=16383&(h[6]<<8|h[7]))}var m=void 0!==e.msecs?e.msecs:Date.now(),_=void 0!==e.nsecs?e.nsecs:d+1,g=m-o+(_-d)/1e4;if(g<0&&void 0===e.clockseq&&(l=l+1&16383),(g<0||m>o)&&void 0===e.nsecs&&(_=0),_>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=m,d=_,s=l;var v=(1e4*(268435455&(m+=122192928e5))+_)%4294967296;u[c++]=v>>>24&255,u[c++]=v>>>16&255,u[c++]=v>>>8&255,u[c++]=255&v;var f=m/4294967296*1e4&268435455;u[c++]=f>>>8&255,u[c++]=255&f,u[c++]=f>>>24&15|16,u[c++]=f>>>16&255,u[c++]=l>>>8|128,u[c++]=255&l;for(var P=0;P<6;++P)u[c+P]=p[P];return t||(0,a.Z)(u)}},946618:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(739425);const s=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,n=(e,t)=>t?e.substring(t.length).split("/")[0]:e,a=({boardUrl:e,path:t,pinId:i,pinnerUserName:a,query:o,search:d,storyPinDataId:c})=>{var u;if(!t)return"";let p="";switch(t){case"/":case"/homefeed/":return"UserHomefeedResource";case a&&`/${a}/pins/`:return"UserPinsResource";case a&&`/${a}/`:case/\/_activity\//.test(t)&&t:return"UserActivityPinsResource";case/\/_created\//.test(t)&&t:return c?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(t)&&t:return"UserDiscoveredPinsResource";case/\/_shop\//.test(t)&&t:return"StoreFrontFeedResource";case/\/_saved\//.test(t)&&t:return"BoardlessPinsResource";case a&&`/${a}/_shopping_list/`:return"ShoppingListFeedResource";case/\/visual-search\//.test(t)&&t:return"VisualLiveSearchResource";case/\/pin\//.test(t)&&t:p="/pin/";const l=n(t,p);if(i!==l)return`RelatedPinFeedResource_${l}`;break;case/\/search\//.test(t)&&t:if(d){return`SearchResource_${((0,r.mB)(d,{shouldDecode:!1}).q||"").toLowerCase()}`}if(o)return`SearchResource_${encodeURIComponent(o.q||"").toLowerCase()}`;break;case/\/categories\//.test(t)&&t:p="/categories/";return`CategoryFeedResource_${n(t,p)}`;case/\/discover\/topics\//.test(t)&&t:return"CategoryFeedResource";case/\/news_hub\//.test(t)&&t:p="/news_hub/";return`NewsHubDetailsResource_${n(t,p)}`;case/\/_tools\/more-ideas\//.test(t)&&t:return"BoardContentRecommendationResource";case/\/topics\//.test(t)&&t:p="/topics/";return`TopicFeedResource_${n(t,p)}`;case a&&`/${a}/products/`:return"StoreFrontFeedResource";case/\/source\//.test(t)&&t:p="/source/";return`DomainFeedResource_${n(t,p)}`;case/\/explore\//.test(t)&&t:p="/explore/";return`SearchResource_${n(t,p)}`;case e:case!!e&&/\/more_ideas\//.test(t)&&t:return"BoardFeedResource";case e&&t.indexOf(e)>-1&&t:return"BoardSectionPinsResource";case/\/following\//.test(t)&&t:return"FollowingFeedResource";case/\/brand_catalog\//.test(t)&&t:return"BrandCatalogFeedResource";case s.test(t)&&t:return`TodayArticleFeedResource_${(null===(u=t.match(s))||void 0===u?void 0:u[2])||"unknown"}`;case/\/today\//.test(t):return"TodayTabResource";case/\story_feed\//.test(t)&&t:if(d){const{feed_type:e,request_params:t}=(0,r.mB)(d);return`StoryFeedResource_${e}_${t}`}}return""},o=({boardUrl:e,location:t,pinId:i,pinnerUserName:r,previousHistory:s,storyPinDataId:n,trackingParams:o,trackingParamsMap:d={}})=>{if(!i||!o||!t)return;if(!d)return`${null!=o?o:""}~0`;const{pathname:c,search:u,query:p}=t,l=a({boardUrl:e,path:c,pinId:i,pinnerUserName:r,query:p,search:u,storyPinDataId:n,trackingParams:o,trackingParamsMap:d}),h=Object.keys(d);let m;if((c||"").startsWith("/pin/")){const e=h.find((e=>"PinResource"!==e));m=e?d[e]:d.PinResource}else m=d[l];let _;if(!m&&s&&s.length){const t=(e=>{let t=null==e?void 0:e.pathname;return t?(t.match(/\/search\//)&&null!=e&&e.search&&(t+=e.search),t.toLowerCase()):""})(s[s.length-1].location);_=a({boardUrl:e,path:t,pinId:i,pinnerUserName:r,query:p,search:u,storyPinDataId:n,trackingParams:o,trackingParamsMap:d}),m=d[_]}return m||(m=`${o||""}~0`),m}},348448:(e,t,i)=>{i.d(t,{w:()=>h});var r=i(40660),s=i(946618),n=i(291986),a=i(911386);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let d=null;const c={ACTIVE:"ACTIVE",PAUSED:"PAUSED"},u=()=>window&&window.performance&&window.performance.now?`(Time: ${(window.performance.now()/1e3).toFixed(3)}s)`:"",p=e=>{let t=!1;return(...i)=>{t||(t=!0,e(...i))}},l={};function h({contextLogger:e,shouldExtractTrackingParams:t}){if(d)return d;const i=(i,r,n)=>{if(t&&n&&i){let e;const{pair_id:t,event_type:c}=i;if(4703===c&&t&&l[t])i.clientTrackingParams=l[t];else{var a;const u=i.object_id_str,p=u?n[u]:null,h=null==r||null===(a=r.current)||void 0===a?void 0:a.location,m=null==r?void 0:r.previous;var o,d;if(p&&h)e=(0,s.Z)({boardUrl:null===(o=p.board)||void 0===o?void 0:o.url,location:h,pinId:p.id,pinnerUserName:null===(d=p.pinner)||void 0===d?void 0:d.username,previousHistory:m,storyPinDataId:p.story_pin_data_id,trackingParams:p.tracking_params,trackingParamsMap:p.tracking_params_map})||`${p.tracking_params||""}~0`,i.clientTrackingParams=e,4702===c&&t&&(l[t]=e)}}e.logContextEvent(i)},h=new Map,m=(0,a.Z)()&&(0,a.Z)().debug_timespent,_=m?console:{error:(...e)=>{},log:(...e)=>{},group:(...e)=>{},groupEnd:(...e)=>{}};console.group||(_.group=(...e)=>console.log(...e),_.groupEnd=(...e)=>{});return d=new class{constructor(){o(this,"appTimedPair",null),o(this,"clickthroughProperties",null),o(this,"historyStackContext",null),o(this,"offsiteTimedPair",null),o(this,"offsiteTimedPairForegroundId",null),o(this,"pins",Object.freeze({})),o(this,"addEventListeners",(()=>{let e,t;"undefined"!==document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange");const i=t=>{document[e]?this.unregisterApp(!1,void 0,t):document.hasFocus()&&this.registerApp()};t&&document.addEventListener(t,i,!1),window.addEventListener("focus",this.registerApp),window.addEventListener("blur",(e=>this.unregisterApp(!1,void 0,e)));const s=p((e=>this.unregisterApp(!0,void 0,e)));window.addEventListener("beforeunload",s),window.addEventListener("pagehide",s);const n=navigator&&navigator.userAgent.toLowerCase();n&&n.includes("macintosh")&&n.includes("chrome")&&window.addEventListener("popstate",(t=>{document.hasFocus()||document[e]||r.Z.increment("chrome_mac_back_forward_button",1)}))})),o(this,"storeClickthroughProperties",(e=>{this.clickthroughProperties&&r.Z.increment("webapp.metrics.clickthroughs.overwritten",1,{previousView:this.clickthroughProperties.view_type,previousViewParameter:this.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}),this.clickthroughProperties=e})),o(this,"clearClickthroughProperties",(()=>{this.clickthroughProperties=null,this.offsiteTimedPair=null,this.offsiteTimedPairForegroundId=null})),o(this,"registerApp",(()=>{_.group("App Foreground",u()),null==this.appTimedPair?(this.appTimedPair=new n.Z,this.appTimedPair.start(),this._unpauseAllComponents(),this._endOffsiteTimedPair(),null!==this.appTimedPair&&void 0!==this.appTimedPair&&i({event_type:4700,pair_id:this.appTimedPair.uuid},this.historyStackContext,this.pins)):_.error("TimedPair already exists for app."),_.groupEnd()})),o(this,"unregisterApp",((t=!1,r=!1,s)=>{_.group("App Background",u());const{appTimedPair:n}=this;if(null!=n){this._pauseAllComponents();const e=n.end();this._startOffsiteTimedPair(),i({event_type:4701,duration_ns:e,pair_id:n.uuid},this.historyStackContext,this.pins),this.appTimedPair=null}else _.error("No TimedPair found for app.");const a=["beforeunload","pagehide"],o=a.includes(null==s?void 0:s.type),d=a.includes(null==s?void 0:s.pauseReason);(o||d)&&this._endOffsiteTimedPair(),r||e.flushContextEvents(null!=t&&t),_.groupEnd()})),o(this,"_activateComponent",(e=>{_.group("Activating component",u()),m&&_.log(e.getContext());const t=e.getTimedPair();if(t){t.start();const{view:r,viewParameter:s,component:n,element:a,objectId:o,clientTrackingParams:d}=e.getLoggerContext();i({event_type:4702,view_type:r,view_parameter:s,component:n,element:a,object_id_str:o,view_data:e.props.viewData,pair_id:t.uuid,clientTrackingParams:d,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId(),...e.props.auxData}},this.historyStackContext,this.pins)}_.groupEnd()})),o(this,"_deactivateComponent",(e=>{_.group("Deactivating component",u()),m&&_.log(e.getContext());const t=e.getTimedPair();if(t){const{view:r,viewParameter:s,component:n,element:a,objectId:o,clientTrackingParams:d}=t,c=t.end();i({event_type:4703,view_type:r,view_parameter:s,component:n,element:a,object_id_str:o,view_data:e.props.viewData,duration_ns:c,pair_id:t.uuid,clientTrackingParams:d,aux_data:{time_spent_foreground_pairid:this.appTimedPair&&this.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId(),...e.props.auxData}},this.historyStackContext,this.pins)}_.groupEnd()})),o(this,"_startOffsiteTimedPair",(()=>{const{clickthroughProperties:e}=this;e&&(this.offsiteTimedPair=new n.Z({...e,view:186,viewParameter:e.view_parameter,objectId:e.object_id_str}),this.offsiteTimedPair.start(),this.offsiteTimedPairForegroundId=this.appTimedPair?this.appTimedPair.uuid:null,i({...e,event_type:4702,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...e.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId}},this.historyStackContext,this.pins))})),o(this,"_endOffsiteTimedPair",(()=>{const{offsiteTimedPair:e,clickthroughProperties:t}=this;if(e&&t){const r=e.end();i({...t,event_type:4703,view_type:186,pair_id:this.offsiteTimedPair?this.offsiteTimedPair.uuid:null,aux_data:{...t.aux_data,time_spent_foreground_pairid:this.offsiteTimedPairForegroundId},duration_ns:r},this.historyStackContext,this.pins),this.clearClickthroughProperties()}})),o(this,"_pauseAllComponents",(()=>{_.group("Pause all components"),h.forEach(((e,t,i)=>{e===c.ACTIVE&&this._deactivateComponent(t),i.set(t,c.PAUSED)})),_.groupEnd()})),o(this,"_unpauseAllComponents",(()=>{_.group("Unpause all components"),h.forEach(((e,t)=>{t.setTimedPair(new n.Z(t.getLoggerContext()))})),h.forEach(((e,t)=>{h.set(t,c.ACTIVE),this._activateComponent(t)})),_.groupEnd()}))}setHistoryStackContext(e){this.historyStackContext=e}setPins(e){this.pins=e}registerComponent(e){null===this.appTimedPair?h.set(e,c.PAUSED):(h.set(e,c.ACTIVE),this._activateComponent(e))}unregisterComponent(e){h.get(e)===c.ACTIVE&&(this._deactivateComponent(e),e.setTimedPair(new n.Z(e.getLoggerContext()))),h.delete(e)}size(){return h.size}},d}},393729:(e,t,i)=>{i.d(t,{j:()=>l,w:()=>p});var r=i(388011),s=i(583592),n=i(282802),a=i(348448),o=i(549201),d=i(272109),c=i(785893);const{Provider:u,useMaybeHook:p}=(0,s.Z)("TimeSpentManagerContext");function l({children:e}){const t=(0,r.v)(),i=(0,o.HG)(),{isAuthenticated:s}=(0,n.B)(),p=i&&s,l=(0,a.w)({contextLogger:t,shouldExtractTrackingParams:p});return(0,d.Z)((()=>{document.hasFocus()&&l.registerApp(),l.addEventListeners()})),(0,c.jsx)(u,{value:l,children:e})}},291986:(e,t,i)=>{i.d(t,{Z:()=>o});var r=i(172045),s=i(17314);function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const a="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor(1e6*window.performance.now()):()=>1e6*Date.now();const o=class{constructor(e){n(this,"start",(()=>(this.startTime=a(),this.startTime))),n(this,"end",(()=>(this.endTime=a(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration)));try{this.uuid=(0,r.Z)()}catch(t){this.uuid=(0,s.Z)()}e&&Object.assign(this,e)}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/93729-8bdd70bb9d6dfd6a.mjs.map